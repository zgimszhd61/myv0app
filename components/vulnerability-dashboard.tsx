'use client'

import { Search, Filter, ChevronDown } from 'lucide-react'
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Badge } from "@/components/ui/badge"

const vulnerabilities = [
  { severity: 'H', name: 'Improper Validation of Integrity Check Value', affects: 'ironic', version: '[23.0.3] [23.1.0,24.1.3) [25.0.0,26.1.1)', type: 'pip', published: '6 Oct 2024' },
  { severity: 'H', name: 'Path Traversal', affects: 'python-semantic-release', version: '[9.8.8]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'H', name: 'Arbitrary Code Execution', affects: 'sentence-transformers', version: '[3.1.0]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'H', name: 'Race Condition', affects: 'terra-notebook-utils', version: '[0.8.0]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'M', name: 'Improper Input Validation', affects: 'uma-sdk', version: '[1.2.2]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'H', name: 'Directory Traversal', affects: 'chainlit', version: '[1.2.0]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'M', name: 'Buffer Overflow', affects: 'capstone', version: '[6.0.0a1]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'C', name: 'Arbitrary Code Execution', affects: 'autogen', version: '[0.3.0b1]', type: 'pip', published: '3 Oct 2024' },
  { severity: 'H', name: 'Race Condition', affects: 'planai', version: '[0.1.2]', type: 'pip', published: '2 Oct 2024' },
  { severity: 'M', name: 'Cross-site Scripting (XSS)', affects: 'ansibleguy-webui', version: '[0.0.23.post3]', type: 'pip', published: '2 Oct 2024' },
  { severity: 'H', name: 'Race Condition', affects: 'ophyd-async', version: '[0.5.1]', type: 'pip', published: '2 Oct 2024' },
]

const applications = [
  'All Vulnerabilities', 'Cargo', 'cocoapods', 'Composer', 'Go', 'hex', 'Maven', 'npm', 'NuGet', 'pip', 'pub', 'RubyGems', 'Swift', 'Unmanaged (C/C++)'
]

export default function VulnerabilityDashboard() {
  return (
    <div className="container mx-auto p-4">
      <div className="bg-blue-50 p-4 flex justify-between items-center mb-4 rounded-lg">
        <p className="text-gray-700">Find out if you have vulnerabilities that put you at risk</p>
        <Button className="bg-teal-600 hover:bg-teal-700 text-white">
          Test your applications
        </Button>
      </div>

      <div className="flex space-x-4 mb-4">
        <div className="w-64 space-y-2">
          <Button variant="outline" className="w-full justify-start">
            <Filter className="mr-2 h-4 w-4" />
            Filters
          </Button>
          <div className="space-y-1">
            <h3 className="font-semibold text-sm text-gray-500 uppercase">APPLICATION</h3>
            {applications.map((app, index) => (
              <label key={index} className="flex items-center space-x-2">
                <input type="checkbox" className="form-checkbox" checked={app === 'pip'} />
                <span>{app}</span>
              </label>
            ))}
          </div>
          <div>
            <h3 className="font-semibold text-sm text-gray-500 uppercase">OPERATING SYSTEM</h3>
            {/* Add operating system options here */}
          </div>
        </div>

        <div className="flex-1">
          <div className="mb-4">
            <Input
              type="search"
              placeholder="Search by package name or CVE"
              className="w-full"
              // prefix={<Search className="h-4 w-4 text-gray-400" />}
            />
          </div>

          <table className="w-full">
            <thead>
              <tr className="text-left text-sm font-medium text-gray-500 border-b">
                <th className="pb-2">VULNERABILITY</th>
                <th className="pb-2">AFFECTS</th>
                <th className="pb-2">TYPE</th>
                <th className="pb-2">PUBLISHED</th>
              </tr>
            </thead>
            <tbody>
              {vulnerabilities.map((vuln, index) => (
                <tr key={index} className="border-b last:border-b-0">
                  <td className="py-2 flex items-center">
                    <Badge
                      variant={vuln.severity === 'H' ? 'destructive' : vuln.severity === 'M' ? 'secondary' : 'default'}
                      className="mr-2"
                    >
                      {vuln.severity}
                    </Badge>
                    <span className="text-blue-600 hover:underline cursor-pointer">{vuln.name}</span>
                  </td>
                  <td className="py-2">
                    <span className="text-blue-600 hover:underline cursor-pointer">{vuln.affects}</span>
                    <span className="text-gray-500 text-sm ml-1">{vuln.version}</span>
                  </td>
                  <td className="py-2">{vuln.type}</td>
                  <td className="py-2">{vuln.published}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  )
}